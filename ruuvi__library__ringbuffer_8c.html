<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ruuvi.libraries.c: src/libs/ringbuffer/ruuvi_library_ringbuffer.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ruuvi.libraries.c
   &#160;<span id="projectnumber">0.2.0</span>
   </div>
   <div id="projectbrief">Drivers for external sensors and peripherals on embedded systems.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ruuvi__library__ringbuffer_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ruuvi_library_ringbuffer.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="ruuvi__library_8h_source.html">ruuvi_library.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ruuvi__library__ringbuffer_8h_source.html">ruuvi_library_ringbuffer.h</a>&quot;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
</div>
<p><a href="ruuvi__library__ringbuffer_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a66e9435442b6cce381e33c13cc0d6815"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ruuvi__library_8h.html#ab5f74ce63e295e48db96153e055de6fe">rl_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__library__ringbuffer_8c.html#a66e9435442b6cce381e33c13cc0d6815">rl_ringbuffer_queue</a> (<a class="el" href="structrl__ringbuffer__t.html">rl_ringbuffer_t</a> *const buffer, const void *const data, const size_t data_length)</td></tr>
<tr class="memdesc:a66e9435442b6cce381e33c13cc0d6815"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue data into ringbuffer.  <a href="#a66e9435442b6cce381e33c13cc0d6815">More...</a><br/></td></tr>
<tr class="separator:a66e9435442b6cce381e33c13cc0d6815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b3ba74191b96485fa342afd74c5707b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ruuvi__library_8h.html#ab5f74ce63e295e48db96153e055de6fe">rl_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__library__ringbuffer_8c.html#a2b3ba74191b96485fa342afd74c5707b">rl_ringbuffer_dequeue</a> (<a class="el" href="structrl__ringbuffer__t.html">rl_ringbuffer_t</a> *const buffer, void *const data)</td></tr>
<tr class="memdesc:a2b3ba74191b96485fa342afd74c5707b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dequeue data from ringbuffer.  <a href="#a2b3ba74191b96485fa342afd74c5707b">More...</a><br/></td></tr>
<tr class="separator:a2b3ba74191b96485fa342afd74c5707b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af959ae3fb351e3eae2f0e209fd690e44"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ruuvi__library_8h.html#ab5f74ce63e295e48db96153e055de6fe">rl_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__library__ringbuffer_8c.html#af959ae3fb351e3eae2f0e209fd690e44">rl_ringbuffer_peek</a> (<a class="el" href="structrl__ringbuffer__t.html">rl_ringbuffer_t</a> *const buffer, const void *data, const size_t index)</td></tr>
<tr class="memdesc:af959ae3fb351e3eae2f0e209fd690e44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Peek data in ringbuffer.  <a href="#af959ae3fb351e3eae2f0e209fd690e44">More...</a><br/></td></tr>
<tr class="separator:af959ae3fb351e3eae2f0e209fd690e44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd842f4f6c35596d3e19deb41d0eeffa"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__library__ringbuffer_8c.html#abd842f4f6c35596d3e19deb41d0eeffa">rl_ringbuffer_full</a> (const <a class="el" href="structrl__ringbuffer__t.html">rl_ringbuffer_t</a> *const buffer)</td></tr>
<tr class="separator:abd842f4f6c35596d3e19deb41d0eeffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a335fb17eb5e9ed773e062d21a377659c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__library__ringbuffer_8c.html#a335fb17eb5e9ed773e062d21a377659c">rl_ringbuffer_empty</a> (const <a class="el" href="structrl__ringbuffer__t.html">rl_ringbuffer_t</a> *const buffer)</td></tr>
<tr class="separator:a335fb17eb5e9ed773e062d21a377659c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2b3ba74191b96485fa342afd74c5707b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ruuvi__library_8h.html#ab5f74ce63e295e48db96153e055de6fe">rl_status_t</a> rl_ringbuffer_dequeue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrl__ringbuffer__t.html">rl_ringbuffer_t</a> *const&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dequeue data from ringbuffer. </p>
<p>This function operates on the tail of the buffer, and rejects operation if there is no more elements in the buffer. Returns pointer to stored data, does not copy it. The stored data can be overwritten by after function returns, so take a deep copy of data if required. You can also use a peek function to view the data without dequeuing</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buffer</td><td>Pointer to ringbuffer to load data from </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Pointer to data, will be assigned at the start of the stored object </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RL_SUCCESS</td><td>Data was dequeued. </td></tr>
    <tr><td class="paramname">RL_ERROR_NULL</td><td>Any input pointer is NULL. </td></tr>
    <tr><td class="paramname">RL_ERROR_NO_DATA</td><td>The ringbuffer was empty. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Data returned by this function can be overwritten, take a deep copy if required. </dd></dl>

<p>Definition at line <a class="el" href="ruuvi__library__ringbuffer_8c_source.html#l00027">27</a> of file <a class="el" href="ruuvi__library__ringbuffer_8c_source.html">ruuvi_library_ringbuffer.c</a>.</p>

</div>
</div>
<a class="anchor" id="a335fb17eb5e9ed773e062d21a377659c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rl_ringbuffer_empty </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrl__ringbuffer__t.html">rl_ringbuffer_t</a> *const&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ruuvi__library__ringbuffer_8c_source.html#l00086">86</a> of file <a class="el" href="ruuvi__library__ringbuffer_8c_source.html">ruuvi_library_ringbuffer.c</a>.</p>

</div>
</div>
<a class="anchor" id="abd842f4f6c35596d3e19deb41d0eeffa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rl_ringbuffer_full </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structrl__ringbuffer__t.html">rl_ringbuffer_t</a> *const&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ruuvi__library__ringbuffer_8c_source.html#l00081">81</a> of file <a class="el" href="ruuvi__library__ringbuffer_8c_source.html">ruuvi_library_ringbuffer.c</a>.</p>

</div>
</div>
<a class="anchor" id="af959ae3fb351e3eae2f0e209fd690e44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ruuvi__library_8h.html#ab5f74ce63e295e48db96153e055de6fe">rl_status_t</a> rl_ringbuffer_peek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrl__ringbuffer__t.html">rl_ringbuffer_t</a> *const&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Peek data in ringbuffer. </p>
<p>This function operates on the tail + offset of the buffer, and rejects operation if there are no more elements in the buffer. Returns pointer to stored data, does not copy it. The stored data can be overwritten by after function returns, so take a deep copy of data if required.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buffer</td><td>Pointer to ringbuffer to peek data from </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Pointer to data, will be assigned at the start of the stored object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>offset to read data, starting from tail. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RL_SUCCESS</td><td>Data was peeked. </td></tr>
    <tr><td class="paramname">RL_ERROR_NULL</td><td>Any input pointer is NULL. </td></tr>
    <tr><td class="paramname">RL_ERROR_NO_DATA</td><td>The ringbuffer doesn't have element at the given index. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Data returned by this function can be overwritten, take a deep copy if required. </dd></dl>

<p>Definition at line <a class="el" href="ruuvi__library__ringbuffer_8c_source.html#l00059">59</a> of file <a class="el" href="ruuvi__library__ringbuffer_8c_source.html">ruuvi_library_ringbuffer.c</a>.</p>

</div>
</div>
<a class="anchor" id="a66e9435442b6cce381e33c13cc0d6815"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ruuvi__library_8h.html#ab5f74ce63e295e48db96153e055de6fe">rl_status_t</a> rl_ringbuffer_queue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrl__ringbuffer__t.html">rl_ringbuffer_t</a> *const&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *const&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>data_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue data into ringbuffer. </p>
<p>This function operates on the head of the buffer, and rejects operation if there is no more room in the buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer</td><td>Pointer to ringbuffer to store data into </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Data to store </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_length</td><td>length of data, at most block_size. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RL_SUCCESS</td><td>Data was queued. </td></tr>
    <tr><td class="paramname">RL_ERROR_NO_MEM</td><td>The ringbuffer was full. </td></tr>
    <tr><td class="paramname">RL_ERROR_CONCURRENCY</td><td>Could not obtain lock. </td></tr>
    <tr><td class="paramname">RL_ERROR_FATAL</td><td>Lock could not be released. </td></tr>
    <tr><td class="paramname">RL_ERROR_NULL</td><td>Data or buffer are NULL. </td></tr>
    <tr><td class="paramname">RL_ERROR_DATA_LENGTH</td><td>Data is bigger than buffer block size. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ruuvi__library__ringbuffer_8c_source.html#l00006">6</a> of file <a class="el" href="ruuvi__library__ringbuffer_8c_source.html">ruuvi_library_ringbuffer.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_87a455bccb09a92130c26a11a880c98a.html">libs</a></li><li class="navelem"><a class="el" href="dir_452660212dcc099f7c9542cd41110309.html">ringbuffer</a></li><li class="navelem"><a class="el" href="ruuvi__library__ringbuffer_8c.html">ruuvi_library_ringbuffer.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
